webpackJsonp([3],{EEdf:function(t,e){},"h/c3":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,i,a,s,o,u,l,c=r("C4MV"),p=r.n(c),v=r("K6ED"),d=r.n(v),f=r("BO1k"),m=r.n(f),_=r("woOf"),h=r.n(_),b=r("Xxa5"),y=r.n(b),x=r("exGp"),k=r.n(x),w=r("Zx67"),g=r.n(w),$=r("Zrlr"),z=r.n($),O=r("wxAW"),E=r.n(O),j=r("zwoO"),A=r.n(j),D=r("Pf15"),C=r.n(D),M=r("7+uW"),P=r("443i"),G=r("ipus"),J=r("JaHG");function N(t,e,r,n,i){var a={};return Object.keys(n).forEach(function(t){a[t]=n[t]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce(function(r,n){return n(t,e,r)||r},a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(t,e,a),a=null),a}var Q=(n=Object(P.a)(),i=Object(G.c)(function(t){return t.user.user}),a=Object(P.e)("user"),s=J.a.loading(),n((u=function(t){function e(){var t,r,n,i,a,s,o,u;z()(this,e);for(var c=arguments.length,v=Array(c),d=0;d<c;d++)v[d]=arguments[d];return r=n=A()(this,(t=e.__proto__||g()(e)).call.apply(t,[this].concat(v))),a=n,s="user",u=n,(o=l)&&p()(a,s,{enumerable:o.enumerable,configurable:o.configurable,writable:o.writable,value:o.initializer?o.initializer.call(u):void 0}),n.list=[],n.columns=[{title:"项目名称",name:"title",width:128,type:"text",sortable:!0,maxlength:16},{title:"发货接口",name:"url",type:"text",rules:J.a.rule("url"),maxlength:256},{title:"密钥",name:"cer",type:"text",maxlength:32},{title:"回跳网址",name:"back",type:"text",rules:J.a.rule("url"),maxlength:256},{title:"操作",name:"tools",width:48}],n.loading=!1,n.body=!1,n.api=!1,n.sort={name:"price",order:"asc"},n.test={app:!1,price:0,ext:"",type:""},i=r,A()(n,i)}return C()(e,t),E()(e,[{key:"openTest",value:function(){this.test_url&&window.open(this.test_url)}},{key:"payQr",value:function(){var t=k()(y.a.mark(function t(e){return y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!/api\/donate\/add\?app_id=\d+$/.test(e.url)){t.next=2;break}return t.abrupt("return",window.open("/donate/"+e.id+"?page=1&n=1"));case 2:this.test.app=e.title;case 3:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"onAdd",value:function(){var t=k()(y.a.mark(function t(e){return y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.id){t.next=8;break}return t.next=3,this.$post("orders/app_add",e);case 3:e=t.sent,this.format(e),this.list.splice(this.list.indexOf(this.body),1,h()({},this.body,e)),t.next=13;break;case 8:return t.next=10,this.$post("orders/app_add",e);case 10:e=t.sent,this.format(e),this.list.push(e);case 13:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"addDemo",value:function(){var t=k()(y.a.mark(function t(){var e;return y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$get("orders/app_demo");case 2:e=t.sent,this.format(e),this.list.push(e);case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"delApp",value:function(){var t=k()(y.a.mark(function t(e,r){return y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$confirm("确定要删除吗？");case 2:if(!t.sent.result){t.next=7;break}return t.next=6,this.$get("orders/app_del",{id:e.id},{loading:!0});case 6:this.list.splice(r,1);case 7:case"end":return t.stop()}},t,this)}));return function(e,r){return t.apply(this,arguments)}}()},{key:"format",value:function(t){t.open=!1}},{key:"refresh",value:function(){var t=k()(y.a.mark(function t(){var e,r,n,i,a,s,o,u;return y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$get("orders/app_list");case 2:for(e=t.sent,r=e.list,n=!0,i=!1,a=void 0,t.prev=7,s=m()(r);!(n=(o=s.next()).done);n=!0)u=o.value,this.format(u);t.next=15;break;case 11:t.prev=11,t.t0=t.catch(7),i=!0,a=t.t0;case 15:t.prev=15,t.prev=16,!n&&s.return&&s.return();case 18:if(t.prev=18,!i){t.next=21;break}throw a;case 21:return t.finish(18);case 22:return t.finish(15);case 23:this.list=r;case 24:case"end":return t.stop()}},t,this,[[7,11,15,23],[16,,18,22]])}));return function(){return t.apply(this,arguments)}}()},{key:"mounted",value:function(){this.refresh()}},{key:"test_url",get:function(){return this.user?location.protocol+"//"+location.host+"/pay?u="+this.user.id+"&price="+Math.floor(100*this.test.price)+"&app="+this.test.app+"&ext="+this.test.ext+"&type="+this.test.type:""}},{key:"table_data",get:function(){var t=this.list.concat(),e=this.sort.name;if(e){var r="desc"==this.sort.order?-1:1;t.sort(function(t,n){var i=t[e]-n[e];if(i)return i*r})}return t}}]),e}(M.default),l=N(u.prototype,"user",[i],{enumerable:!0,initializer:null}),N(u.prototype,"refresh",[a,s],d()(u.prototype,"refresh"),u.prototype),o=u))||o),S={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"pages-project"},[r("br"),t._v(" "),r("div",{staticStyle:{"text-align":"right"}},[r("mu-button",{attrs:{color:"indigo"},on:{click:t.addDemo}},[t._v("添加Demo")]),t._v(" "),r("mu-button",{attrs:{color:"secondary"},on:{click:function(e){t.body={}}}},[t._v("添加")]),t._v(" "),r("mu-button",{attrs:{color:"primary"},on:{click:t.refresh}},[t._v("刷新")])],1),t._v(" "),r("br"),t._v(" "),r("mu-paper",{attrs:{"z-depth":1}},[r("mu-data-table",{attrs:{loading:t.loading,columns:t.columns,data:t.table_data,sort:t.sort},on:{"update:sort":function(e){t.sort=e}},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row,i=e.$index;return[r("td",[t._v(t._s(n.title))]),t._v(" "),r("td",{directives:[{name:"select",rawName:"v-select"}]},[t._v(t._s(n.url))]),t._v(" "),r("td",[r("i-hide",{attrs:{value:n.cer,open:n.open},on:{"update:open":function(e){t.$set(n,"open",e)}}})],1),t._v(" "),r("td",[r("a",{attrs:{href:n.back,target:"_blank"}},[t._v(t._s(n.back))])]),t._v(" "),r("td",[r("mu-menu",{attrs:{cover:"",placement:"bottom-end"}},[r("mu-icon",{attrs:{value:"more_vert"}}),t._v(" "),r("mu-list",{attrs:{slot:"content"},slot:"content"},[r("mu-list-item",{attrs:{button:""},on:{click:function(e){t.payQr(n,i)}}},[r("mu-list-item-title",[t._v("测试")])],1),t._v(" "),r("mu-list-item",{attrs:{button:""},on:{click:function(e){t.body=n}}},[r("mu-list-item-title",[t._v("编辑")])],1),t._v(" "),r("mu-list-item",{attrs:{button:""},on:{click:function(e){t.delApp(n,i)}}},[r("mu-list-item-title",[t._v("删除")])],1)],1)],1)],1)]}}])})],1),t._v(" "),r("br"),t._v(" "),r("b",[t._v("支付接口: ")]),r("span",{directives:[{name:"select",rawName:"v-select"}]},[t._v("http://perpay.inu1255.cn/pay?u="+t._s(t.user&&t.user.id)+"&price=(金额,单位:分)&app=(项目名称)&ext=(自定义参数)&type=(0:支付宝 1:微信 不传:用户选择)")]),t._v(" "),r("b",[t._v("发货参数: ")]),t._v(" "),t._m(0),t._v(" "),r("i-form",{attrs:{width:"480",params:t.columns,open:t.body,submit:t.onAdd},on:{"update:open":function(e){t.body=e}}}),t._v(" "),r("mu-dialog",{attrs:{width:"480",open:t.test.app},on:{"update:open":function(e){t.$set(t.test,"app",e)}}},[r("mu-form",{attrs:{model:t.test}},[r("mu-form-item",{attrs:{label:"金额(元)"}},[r("mu-text-field",{model:{value:t.test.price,callback:function(e){t.$set(t.test,"price",e)},expression:"test.price"}})],1),t._v(" "),r("mu-form-item",{attrs:{label:"支付方式"}},[r("mu-select",{model:{value:t.test.type,callback:function(e){t.$set(t.test,"type",e)},expression:"test.type"}},[r("mu-option",{attrs:{label:"用户选择",value:""}}),t._v(" "),r("mu-option",{attrs:{label:"支付宝",value:0}}),t._v(" "),r("mu-option",{attrs:{label:"微信",value:1}})],1)],1),t._v(" "),r("mu-form-item",{attrs:{label:"自定义参数"}},[r("mu-text-field",{model:{value:t.test.ext,callback:function(e){t.$set(t.test,"ext",e)},expression:"test.ext"}})],1)],1),t._v("\n\t\t点击测试："),r("br"),r("a",{staticClass:"small",attrs:{target:"_blank",href:t.test_url}},[t._v(t._s(t.test_url))]),t._v(" "),r("mu-button",{attrs:{slot:"actions",flat:""},on:{click:function(e){t.test.app=!1}},slot:"actions"},[t._v("取消")]),t._v(" "),r("mu-button",{attrs:{slot:"actions",flat:"",color:"primary"},on:{click:t.openTest},slot:"actions"},[t._v("确定")])],1)],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ul",[r("li",[t._v("id:订单号")]),t._v(" "),r("li",[t._v("price:订单金额")]),t._v(" "),r("li",[t._v("ext:自定义参数")]),t._v(" "),r("li",[t._v("t:请求时间")]),t._v(" "),r("li",[t._v("sign:签名=md5(id + price + (ext || '') + t + cer)")])])}]};var T=r("VU/8")(Q,S,!1,function(t){r("EEdf")},null,null);e.default=T.exports}});